对于使用C语言的同学来说，malloc函数是很经典的函数，使用起来也很简单便捷，可是内核实现并不简单。回到本章开头的问题，malloc函数其实是为用户空间分配进程地址空间，用内核术语来说就是分配一块VMA（VMALLOC的高端内存并不是指的这个VMA，VMA是指进程中4G地址空间，包括了VMALLOC的高端内存）,相当于一个空的纸箱。那什么时候才往纸箱子里装东西呢？有两种方式，一种是真正使用箱子的时候才往里面装东西，另一种是分配箱子的时候就装你想要的东西。进程A立马的testA函数就是这种情况，当使用这段内存时，CPU去查询页表，发现页表为空，CPU触发缺页中断，然后在缺页中断里一页一页的分配内存，需要一页给一页。进程B里面的testB函数，是第二种情况，直接分配已经装满的纸箱子，你要的虚拟内存都已经分配了物理内存并建立了页表映射。

假设不考虑libc库的因素，malloc分配100Byte，那么内核会分配多少Byte呢？处理器MMU的硬件单元是最小单位是页，所以内核分配内存